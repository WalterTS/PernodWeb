{% extends 'base.html.twig' %}

{% block body %}
    {# AREA BREADCUM/BOTÓN #}
    <div class="col-xs-12 px-0 breadcrumb-c">
        <span>Agencia / <strong>Usuarios</strong></span>
        <h1>Usuarios</h1>
    </div>
    <div class="col-xs-12 px-0 new-btn">
        <a href="{{ path('agencia_usuario_new') }}" class="filter-t-add">
            Crear nuevo<span class="glyphicon glyphicon-plus"></span>
        </a>
    </div>
    {# ---- AREA BREADCUM/BOTÓN #}
    {% include 'ReportBundle:admin:layout/filter-top.html.twig' with {'list_filter':'y', 'searchBy':'usuario'} %}
    <div class='table-wrap hidden-xs'>
        <table class="table table-striped table-bordered dt-responsive nowrap admin-list custom-table-list">
            <thead>
                <tr>
                    <th>{{knp_pagination_sortable(pagination,'Nombre','Usuario.nombre')}}</th>
                    <th>{{knp_pagination_sortable(pagination,'Email','Usuario.email')}}</th>
                     <th>{{knp_pagination_sortable(pagination,'Region','r.nombre')}}</th>
                    <th>{{knp_pagination_sortable(pagination,'Tipo','Usuario.roles')}}</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                {% if pagination|length %}
                    {% for usuario in pagination %}
                        <tr>
                            <td>{{usuario.nombre}}</td>
                            <td>{{usuario.email}}</td>
                            <td>{{usuario.agencia}}</td>
                            <td>{{usuario.tipo}}</td>
                            <td><a href="{{ path('agencia_usuario_edit',{'id':usuario.id}) }}">
                                    <button class="btn bg-ocean">Editar</button>
                                </a> 
                                <a href="{{ path('agencia_usuario_show',{'id':usuario.id}) }}">
                                    <button class="btn bg-ocean">Mostrar</button>
                                </a></td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan='6'>
                            <p>NO HAY USUARIOS</p>
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
    <div class="navigation">
        {{ knp_pagination_render(pagination) }}
    </div>
{% endblock %}
